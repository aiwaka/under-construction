---
import { Image } from "@astrojs/image/components";

interface Props {
  // FIXME: stringではなくimport結果を渡すようにしている. 修正する
  src: string;
  width: number;
  alt: string;
  caption?: string;
}
const { src, width, height, alt, caption, ...attrs } = Astro.props;
---

{/* TODO: format="webp"を追加する */}
<figure>
  <Image src={src} width={width} height={height} alt={alt} {...attrs} />
  {caption ? <figcaption>{caption}</figcaption> : null}
</figure>

<style>
  figure {
    border: 3px double var(--main-color);
    margin: 1.7rem 1rem;
    display: flex;
    flex-direction: column;
    height: fit-content;
  }
  figcaption {
    background-color: rgba(var(--main-color-params), 0.8);
    color: var(--main-bg-color);
    padding: 3px;
    text-align: center;
  }
</style>
