---
// ブログページだけ背景を変えたいので背景スタイルを当てるためにレイアウトを作成する.
// またブログ記事タイトルを受け取った処理も行う.
import BaseLayout from "./BaseLayout.astro";

export interface Props {
  title: string;
}
const { title } = Astro.props;
---

<BaseLayout
  title={title
    ? `Under Construction | Blog | ${title}`
    : "Under Construction | Blog"}
>
  <div class="header-margin"></div>
  <slot />
</BaseLayout>

<script>
  // タグをクリックした際カードコンポーネントによる遷移を阻止する処理
  const cards = document.querySelectorAll<HTMLElement>("a.article-link");
  cards.forEach((card) => {
    card.addEventListener("click", (ev) => {
      const target = ev.target as HTMLElement;
      target.dataset.hasOwnProperty("tagUrl") ? ev.preventDefault() : null;
    });
  });
  // タグコンポーネントにクリックイベントハンドラを割り当てる処理
  const tagButtons =
    document.querySelectorAll<HTMLElement>("button.article-tag");
  tagButtons.forEach((btn) => {
    btn.addEventListener("click", () => {
      alert(btn.dataset.tagUrl);
    });
  });
</script>

<style>
  .header-margin {
    height: 8rem;
  }
  body::before {
    content: "";
    display: block;
    position: fixed;
    top: 0;
    left: 0;
    z-index: -50;
    width: 100%;
    height: 100svh;
    background-repeat: no-repeat;
    background-image: url("/img/blue_2.png");
    background-position: 100% 0%;
    background-size: cover;
    @media (max-width: 1024px) {
      background-position: center 0%;
    }
  }
</style>
